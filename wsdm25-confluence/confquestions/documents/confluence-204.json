{
    "id": "confluence-204",
    "title": "OpenXT Packages",
    "url": "https://openxt.atlassian.net/wiki/spaces/DC/pages/16154640/OpenXT+Packages",
    "content": "<p>Owned by Jed\nLast updated: Nov 06, 2015 by Ross Philipson\n\n</p><ac:structured-macro ac:macro-id=\"af5facb5-88ac-4da7-a8d5-8014c7f77e28\" ac:name=\"info\" ac:schema-version=\"1\"><ac:parameter ac:name=\"icon\">None</ac:parameter><ac:rich-text-body><p><ac:image ac:width=\"80\"><ri:attachment ri:filename=\"cc-by.png\"><ri:page ri:content-title=\"Documentation Guidelines\" ri:space-key=\"OD\"></ri:page></ri:attachment></ac:image></p><p>Copyright 2015 by Assured Information Security, Inc. Created by Jean-Edouard Lejosne &lt;lejosnej@ainfosec.com&gt;. This work is licensed under the Creative Commons Attribution 4.0 International License. To view a copy of this license, visit <a class=\"external-link\" href=\"http://creativecommons.org/licenses/by/4.0/\" rel=\"nofollow\">http://creativecommons.org/licenses/by/4.0/</a>.</p></ac:rich-text-body></ac:structured-macro><p><ac:structured-macro ac:macro-id=\"2ef5c154-adb5-4e5a-8a91-61eb2eb26aff\" ac:name=\"toc\" ac:schema-version=\"1\"></ac:structured-macro></p><h1>Format</h1><p>OpenXT uses the ipk format for packages, and opkg as a package manager.</p><p>ipk and opkg are comparable to respectively deb and dpkg in Debian. (some dpkg operations, like <strong><code>dpkg -c</code></strong>, will work on ipks).</p><p>opkg can use configuration files similar to the Debian <code><strong>/etc/apt/sources.list</strong></code>. Such configuration files are created at build time in OpenEmbedded.</p><h1>OpenEmbedded packages</h1><p>Everything OpenEmbedded builds end up in separate packages.</p><p>For simple recipes, 3 packages are created:</p><ul style=\"list-style-type: square;\"><li><strong><code>package_version.ipk</code></strong>, which contain the stripped binaries that were built</li><li><strong><code>package_version-dev.ikg</code></strong>, which contains mainly development headers</li><li><strong><code>package_version-dbg.ipk</code></strong>, with the symbols for debugging (gdb)</li></ul><p>For kernel recipes, a lot of packages are created. There's mainly one package for the kernel itself, and one package per kernel module.</p><p>For every package (and all their DEPENDencies) needed by a given image/task (like dom0), only <strong><code>package_version.ipk</code></strong> will be installed at build time in the rootfs.</p><p>The OpenXT build system also includes a recipe called <strong><code>task-xenclient-extra</code></strong>, which is a list of packages that aren't likely to get built for any rootfs, but that we want available, mostly for debugging purposes (example: gdb).</p><h1>Building</h1><p>All the packages for all the targets are collected at the end of the build, and copied to a web server by the <strong><code>packages_tree</code></strong> step based on a configuration value.</p><p>The recipe <code><strong>xenclient-feed-configs</strong></code> builds the opkg config files based on another configuration value.</p><p>The two configuration values to set in your .config are, respectively:</p><ul style=\"list-style-type: square;\"><li><p><strong><code>BUILD_RSYNC_DESTINATION=&lt;HOST&gt;:&lt;PATH&gt;</code></strong>, which is the rsync destination for the build output</p></li><li><p><strong><code>NETBOOT_HTTP_URL=http://&lt;HOST&gt;/&lt;PATH&gt;</code></strong>, which is the URL for web access to the build output location</p></li></ul><h1>Installing</h1><p>With everything setup, built and installed right, every single package built by OpenEmbedded should be install-able using:</p><ac:structured-macro ac:macro-id=\"14b02935-b96a-47a2-bead-c8245479dc19\" ac:name=\"code\" ac:schema-version=\"1\"><ac:plain-text-body><![CDATA[$ nr\n$ rw\n$ opkg update\n$ opkg install <PACKAGE>\n$ ro]]></ac:plain-text-body></ac:structured-macro><p>Note: when doing that, make sure there's enough space on the rootfs first.</p><p>We usually try to make sure that the volume group always has at least 1GB of free space, which you can allocate to dom0 using:</p><ac:structured-macro ac:macro-id=\"f6a42b95-7a40-409d-b44b-c02b9e5ccd2f\" ac:name=\"code\" ac:schema-version=\"1\"><ac:plain-text-body><![CDATA[$ lvresize L+1G /dev/mapper/xenclientroot\n$ rw\n$ resize2fs /dev/mapper/xenclient-root\n$ ro]]></ac:plain-text-body></ac:structured-macro><p>When working on OpenXT, people will usually want to install gdb/valgrind, built by <strong><code>task-xenclient-extra</code></strong>, and the <strong><code>-dbg</code></strong> packages for the things to debug. Installing <strong><code>-dbg</code></strong> packages usually pull a lot of <strong><code>-dbg</code></strong> dependencies, especially the first time, so extending the rootfs is usually required.</p><p> </p>",
    "date": "2024-11-15",
    "disclaimer": "Users of this benchmark dataset are advised to check Atlassian’s official documentation for the most current information.",
    "space": "DC"
}