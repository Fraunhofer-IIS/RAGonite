{
    "id": "confluence-025",
    "title": "Create Space on Target",
    "url": "https://openxt.atlassian.net/wiki/spaces/DC/pages/14843953/Create+Space+on+Target",
    "content": "<p>Owned by Ross Philipson\nLast updated: Sep 25, 2015 by Ross Philipson\n\n</p><h2><span>Create a little space on target</span></h2><p><span><span>This works within the 1G that is spare on a default install.</span></span></p><pre> df -h\n lvresize -L +1G  /dev/xenclient/root \n resize2fs -p /dev/xenclient/root\n df -h</pre><h2><span>Create a lot of space on target</span></h2><p>This is for when you need more expansion than will fit in the spare room of the install.</p><p>If SELinux is enforcing you need to turn that off:</p><p>$ nr</p><p>$ setenforce 0</p><p>First you have to stop the monit daemon (don't ask):</p><p>$ /etc/init.d/monit stop</p><p>Stop <a class=\"internal absent\" href=\"https://github.com/OpenXT/openxt/wiki/xenmgr\">xenmgr</a> so nobody use storage anymore:</p><p>$ /etc/init.d/xenmgr stop</p><p>$ umount /storage</p><p>Resize storage filesystem (shrink it to 100G):</p><p>$ e2fsck -f /dev/xenclient/storage</p><p>$ resize2fs /dev/xenclient/storage 100G</p><p>Make the storage lv 101G to be on the safe side:</p><p>$ lvresize /dev/xenclient/storage -L101G</p><p>Remount storage and restart xenmgr:</p><p>$ mount /storage</p><p>$ /etc/init.d/xenmgr start</p><p>Make more space on root (10G):</p><p>$ lvresize /dev/xenclient/root -L10G</p><p>Do the online resize in the background:</p><p>$ resize2fs /dev/xenclient/root &amp;</p><p>df will tell you live how big root is:</p><p>$ df -h</p><p>NOTE: it takes a while for the root resize. Don't start installing packages etc. until it is done.</p><p>NOTE: it should be possible to restart xenmgr but this may not always work out for you. It is better to just reboot when you are done.</p><h3><span>Here it is as a script</span></h3><ac:structured-macro ac:macro-id=\"94dc0cb4-bd78-416d-a89d-4b7102513033\" ac:name=\"code\" ac:schema-version=\"1\"><ac:parameter ac:name=\"language\">bash</ac:parameter><ac:plain-text-body><![CDATA[#!/bin/bash\n \n# Stop xenmgr so nobody use storage anymore:\n/etc/init.d/monit stop\n/etc/init.d/xenmgr stop\numount /storage\n# Resize storage filesystem (shrink it to 100G):\ne2fsck -f /dev/xenclient/storage || exit 1\nresize2fs /dev/xenclient/storage 100G || exit 1\n# Make the storage lv 101G to be on the safe side:\nlvresize /dev/xenclient/storage -L101G\n# Remount storage and restart xenmgr:\nmount /storage\n/etc/init.d/xenmgr start\n# Make more space on root (10G):\nlvresize /dev/xenclient/root -L10G\n# Do the online resize in the background:\nresize2fs /dev/xenclient/root &\n# df will tell you live how big root is:\ndf -h]]></ac:plain-text-body></ac:structured-macro><p><span><br/></span></p>",
    "date": "2024-11-15",
    "disclaimer": "Users of this benchmark dataset are advised to check Atlassian’s official documentation for the most current information.",
    "space": "DC"
}