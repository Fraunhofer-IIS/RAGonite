{
    "id": "confluence-141",
    "title": "How to Install Guest VMs",
    "url": "https://openxt.atlassian.net/wiki/spaces/OD/pages/44924936/How+to+Install+Guest+VMs",
    "content": "<p>Owned by Jed\nLast updated: May 09, 2018 by Jed\n\n</p><ac:layout><ac:layout-section ac:type=\"single\"><ac:layout-cell><p class=\"auto-cursor-target\"><br/></p><ac:structured-macro ac:macro-id=\"10dfc698-c77e-4af7-a0c9-49e95b9844de\" ac:name=\"info\" ac:schema-version=\"1\"><ac:rich-text-body><p><ac:image ac:width=\"80\"><ri:attachment ri:filename=\"cc-by.png\" ri:version-at-save=\"1\"></ri:attachment></ac:image></p><p>Copyright 2016 by Assured Information Security, Inc. Created by Jean-Edouard Lejosne &lt;lejosnej@<a href=\"http://ainfosec.com/\">ainfosec.com</a>&gt;. This work is licensed under the Creative Commons Attribution 4.0 International License. To view a copy of this license, visit <a class=\"external-link\" href=\"http://creativecommons.org/licenses/by/4.0/\" rel=\"nofollow\">http://creativecommons.org/licenses/by/4.0/</a>.</p></ac:rich-text-body></ac:structured-macro><p class=\"auto-cursor-target\"><br/></p></ac:layout-cell></ac:layout-section><ac:layout-section ac:type=\"single\"><ac:layout-cell><p><ac:structured-macro ac:macro-id=\"015ae766-43a4-4f2a-a458-01b0d5a4a84a\" ac:name=\"toc\" ac:schema-version=\"1\"></ac:structured-macro></p></ac:layout-cell></ac:layout-section><ac:layout-section ac:type=\"single\"><ac:layout-cell><h1>Windows</h1></ac:layout-cell></ac:layout-section><ac:layout-section ac:type=\"single\"><ac:layout-cell><h2 class=\"auto-cursor-target\">Windows 7 guest</h2><h3>First steps</h3><ul style=\"list-style-type: square;\"><li>Find a Windows 7 or Windows 7 SP1 CD or ISO file</li><li>Insert the CD or copy the ISO to <code>/storage/isos</code></li><li>Create a new guest, with at least 1024MB of RAM for a 32 bits install, 2048MB for 64 bits (<a href=\"https://support.microsoft.com/en-us/help/10737/windows-7-system-requirements\">https://support.microsoft.com/en-us/help/10737/windows-7-system-requirements</a>)</li><li>Install Windows. It's usually a good idea to choose \"Ask me later\" when asked about Windows Update, to avoid interference when installing standalone updates below.</li><li>Download the OpenXT tools certificate (for openxt.ainfosec.com builds, use: <a href=\"http://openxt.ainfosec.com/certificates/windows/developer.cer\">http://openxt.ainfosec.com/certificates/windows/developer.cer</a>)</li><li>Open an Administrator command prompt, cd to the directory where developer.cer was downloaded and run the 3 following commands:</li><li><pre>bcdedit /set testsigning on</pre></li><li><pre>certutil -addstore -f \"Root\" developer.cer</pre></li><li><pre>certutil -addstore -f \"TrustedPublisher\" developer.cer</pre></li><li>Reboot the guest</li><li>Insert the OpenXT Guest Tools ISO, install the tools and reboot</li></ul><h3>Installing SP1</h3><p>Non-SP1 installs of Windows 7 should be upgraded to SP1 first.</p><p>Out of the box, there's a chance that the SP1 installation will never finish. The following steps should address that:</p><ul><li>Install KB947821</li><li>Run the SP1 standalone installer: KB976932</li></ul><h3>Fixing Windows Update</h3><p>Again, out of the box, there are Windows Update issues in WIndows 7 SP1. These are not OpenXT-specific, but they seem to have a bigger impact in Xen guests than on bare-metal.</p><p>Microsoft released many Windows Update fixes over the years, and after some testing, the following ones seem to do the trick (install them in this order, using the standalone installers, not Windows Update):</p><ol><li>KB3102810 (Make Windows Update a lot faster)</li><li>KB3020369 (Dependency for 3.)</li><li><s>KB3161608 (Includes KB3161647, which fixes Windows Update hangs)</s> See <a href=\"http://www.infoworld.com/article/3099109/microsoft-windows/microsoft-yanks-buggy-speed-up-patch-kb-3161608-replaces-it-with-kb-3172605-and-3172614.html\">http://www.infoworld.com/article/3099109/microsoft-windows/microsoft-yanks-buggy-speed-up-patch-kb-3161608-replaces-it-with-kb-3172605-and-3172614.html</a></li><li>KB3161664 (Suggested by <a href=\"http://superuser.com/questions/951960/windows-7-sp1-windows-update-stuck-checking-for-updates\" rel=\"nofollow\">http://superuser.com/questions/951960/windows-7-sp1-windows-update-stuck-checking-for-updates</a>. May not be needed, but seems pretty good to have seeing the description!)</li></ol><p>More up to date list 10/13/2016:</p><ol><li>KB3102810 (<a class=\"external-link\" href=\"https://support.microsoft.com/en-us/kb/3102810\" rel=\"nofollow\">https://support.microsoft.com/en-us/kb/3102810</a>)</li><li>KB3020369 (<a class=\"external-link\" href=\"https://support.microsoft.com/en-us/kb/3020369\" rel=\"nofollow\">https://support.microsoft.com/en-us/kb/3020369</a>)</li><li>KB3172605 (<a class=\"external-link\" href=\"https://support.microsoft.com/en-us/kb/3172605\" rel=\"nofollow\">https://support.microsoft.com/en-us/kb/3172605</a>)</li></ol><h3>Updating</h3><p>Once Windows Update is fixed, you should now be able to select \"Windows Updates\" in the Control Panel, check for updates and install the appropriate ones.</p><p>At this point, you can also configure Windows Update to automatically download / install updates.</p><h2 class=\"auto-cursor-target\">Windows 10 guest</h2><p>To use a Windows 10 guest without installing the tools (NOT recommended), hibernate should be disabled.</p><p>In a administrator Command Prompt (Admin), type the commande line :</p><pre>powercfg.exe /hibernate off</pre></ac:layout-cell></ac:layout-section><ac:layout-section ac:type=\"single\"><ac:layout-cell><h1>Linux</h1><h2>Network connection</h2><p>Linux guests may experience issues to connect to the wired network.</p><p>A workaround to this issue is to disconnect eth1</p></ac:layout-cell></ac:layout-section><ac:layout-section ac:type=\"single\"><ac:layout-cell><h2>Ubuntu 16.10</h2><h3>First steps</h3><ul><li>Download an installer from the ubuntu web site.</li><li>Create a new guest (use minimal hardware requirements recommended by Ubuntu)</li><li>Install Ubuntu and reboot at the end of installation</li></ul><h3>Turn off ACPI during installation</h3><p><ac:structured-macro ac:macro-id=\"084d6a07-119b-45a9-971c-b0269c913ed7\" ac:name=\"jira\" ac:schema-version=\"1\"><ac:parameter ac:name=\"server\">JIRA (openxt.atlassian.net)</ac:parameter><ac:parameter ac:name=\"columns\">key,summary,type,created,updated,due,assignee,reporter,priority,status,resolution</ac:parameter><ac:parameter ac:name=\"serverId\">87e67eec-7c89-3635-99bf-e58e55630835</ac:parameter><ac:parameter ac:name=\"key\">OXT-694</ac:parameter></ac:structured-macro></p><p>It could happens that the guest hibernates or goes to sleep during installation.</p><p>To avoid that, ACPI should be turned off.</p><ul><li>Boot guest on the iso file</li><li>As the CD boots, access to the advanced page and its options by pressing any key when the small logo appears at the bottom of your screen.</li></ul><p><ac:image ac:class=\"external_image\" ac:height=\"250\"><ri:url ri:value=\"http://doc.ubuntu-fr.org/_media/installation/live_cd_maverick1.png?cache=\"></ri:url></ac:image><ac:image ac:class=\"external_image\" ac:height=\"250\"><ri:url ri:value=\"http://pix.toile-libre.org/upload/original/1354180067.png\"></ri:url></ac:image></p><ul><li>Type F6 and select acpi=off</li></ul><p><ac:image ac:alt=\"Boot-F6-Other.png\" ac:class=\"attachment\" ac:height=\"250\"><ri:url ri:value=\"https://help.ubuntu.com/community/BootOptions?action=AttachFile&amp;do=get&amp;target=Boot-F6-Other.png\"></ri:url></ac:image></p><ul><li>Proceed with installation</li><li>Follow the instruction to install.</li></ul><p>At the end of the installation, the guest is ready to be used</p></ac:layout-cell></ac:layout-section><ac:layout-section ac:type=\"single\"><ac:layout-cell><h2>Debian 8/9 (Jessie/Stretch)</h2><h3>First steps</h3><ul><li>Download an installer from the debian web site.</li><li>Create a new guest (use minimal hardware requirements recommended by Debian)</li><li>Install Debian and reboot at the end of installation</li><li>On reboot, the guest may be stuck on a black screen, you may then blacklist bochs_drm driver</li><li>Note: For the first boot, bochs_drm can also be disabled on the kernel cmdline by editing the grub entry and adding \"modprobe.blacklist=bochs_drm\"</li></ul><h3>Blacklist bochs_drm driver</h3><p><ac:structured-macro ac:macro-id=\"9efa8fbd-0f61-4735-98e8-d32dcdf2be5c\" ac:name=\"jira\" ac:schema-version=\"1\"><ac:parameter ac:name=\"server\">JIRA (openxt.atlassian.net)</ac:parameter><ac:parameter ac:name=\"columns\">key,summary,type,created,updated,due,assignee,reporter,priority,status,resolution</ac:parameter><ac:parameter ac:name=\"serverId\">87e67eec-7c89-3635-99bf-e58e55630835</ac:parameter><ac:parameter ac:name=\"key\">OXT-806</ac:parameter></ac:structured-macro></p><p>On the black screen, open a terminal (CTRL + ALT + F2)</p><pre># cd /etc/modprobe.d</pre><pre># nano bochsdrm-blacklist.conf (or fbdev-blacklist.conf if exists)</pre><p>add the line</p><blockquote><pre>blacklist bochs_drm</pre></blockquote><p>save the file blacklist.config</p><pre># update-initramfs -u</pre><pre># reboot</pre><p>The guest is ready to be used. The recommended next step is to install the OpenXT tools.</p><p><br/></p></ac:layout-cell></ac:layout-section><ac:layout-section ac:type=\"single\"><ac:layout-cell><h2>Fedora 24 - Fedora 25</h2><h3>First steps</h3><ul><li>Download the <strong>netinst</strong> installer from the Fedora web site.</li><li>Create a new guest (use minimal hardware requirements recommended by Fedora)</li></ul><h3>Blacklist bochs_drm driver on installation</h3><p><ac:structured-macro ac:macro-id=\"fdeaca43-4fb1-47f9-85b5-6afda203eb75\" ac:name=\"jira\" ac:schema-version=\"1\"><ac:parameter ac:name=\"server\">JIRA (openxt.atlassian.net)</ac:parameter><ac:parameter ac:name=\"columns\">key,summary,type,created,updated,due,assignee,reporter,priority,status,resolution</ac:parameter><ac:parameter ac:name=\"serverId\">87e67eec-7c89-3635-99bf-e58e55630835</ac:parameter><ac:parameter ac:name=\"key\">OXT-806</ac:parameter></ac:structured-macro></p><ul><li>Boot guest on the iso file</li><li>Press tab on the CD bootloader</li><li>Type \"modprobe.blacklist=bochs_drm\" at the end of the command line</li><li>Press enter</li><li>Once the installer starts, swith on eth0 and switch off eth1 in \"NETWORK &amp; HOST NAME\"</li><li>Follow the instruction to install.</li></ul><p>At the end of the installation, the guest is ready to be used</p><h3>Turn off ACPI during installation</h3><p><ac:structured-macro ac:macro-id=\"39057863-3223-45b4-8275-f21062960cbd\" ac:name=\"jira\" ac:schema-version=\"1\"><ac:parameter ac:name=\"server\">JIRA (openxt.atlassian.net)</ac:parameter><ac:parameter ac:name=\"columns\">key,summary,type,created,updated,due,assignee,reporter,priority,status,resolution</ac:parameter><ac:parameter ac:name=\"serverId\">87e67eec-7c89-3635-99bf-e58e55630835</ac:parameter><ac:parameter ac:name=\"key\">OXT-808</ac:parameter></ac:structured-macro></p><p>It could happens that the guest hibernates or goes to sleep during installation.</p><p>To avoid that, ACPI should be turned off.</p><ul><li>Boot guest on the iso file</li><li>Press tab on the CD bootloader</li><li>Type \" modprobe.blacklist=bochs_drm acpi=off\" at the end of the command line</li><li>Press enter</li><li>Once the installer starts, swith on eth0 and switch off eth1 in \"NETWORK &amp; HOST NAME\"</li><li>Follow the instruction to install.</li></ul><p>At the end of the installation, the guest is ready to be used</p><p><br/></p></ac:layout-cell></ac:layout-section><ac:layout-section ac:type=\"single\"><ac:layout-cell><h2>CentOS 7</h2><h3>First steps</h3><ul><li>Download an installer from the CentOS web site.</li><li>Create a new guest (use minimal hardware requirements recommended by CentOS)</li></ul><h3>Blacklist bochs_drm driver on installation</h3><p><ac:structured-macro ac:macro-id=\"41f77e2f-8f6a-4743-aa91-a807880c9f5c\" ac:name=\"jira\" ac:schema-version=\"1\"><ac:parameter ac:name=\"server\">JIRA (openxt.atlassian.net)</ac:parameter><ac:parameter ac:name=\"columns\">key,summary,type,created,updated,due,assignee,reporter,priority,status,resolution</ac:parameter><ac:parameter ac:name=\"serverId\">87e67eec-7c89-3635-99bf-e58e55630835</ac:parameter><ac:parameter ac:name=\"key\">OXT-806</ac:parameter></ac:structured-macro></p><ul><li>Boot guest on the iso file</li><li>Press tab on the CD bootloader</li><li>Type \" modprobe.blacklist=bochs_drm\" at the end of the command line</li><li>Press enter</li><li>Once the installer starts, swith on eth0 and switch off eth1 in \"NETWORK &amp; HOST NAME\"</li><li>Follow the instruction to install.</li></ul><p>At the end of the installation, the guest is ready to be used</p><h3>Turn off ACPI during installation</h3><p><ac:structured-macro ac:macro-id=\"74830777-2c4a-4f77-9e3c-61229823d11e\" ac:name=\"jira\" ac:schema-version=\"1\"><ac:parameter ac:name=\"server\">JIRA (openxt.atlassian.net)</ac:parameter><ac:parameter ac:name=\"columns\">key,summary,type,created,updated,due,assignee,reporter,priority,status,resolution</ac:parameter><ac:parameter ac:name=\"serverId\">87e67eec-7c89-3635-99bf-e58e55630835</ac:parameter><ac:parameter ac:name=\"key\">OXT-694</ac:parameter></ac:structured-macro></p><p>It could happens that the guest hibernates or goes to sleep during installation.</p><p>To avoid that, ACPI should be turned off.</p><ul><li>Boot guest on the iso file</li><li>Press tab on the CD bootloader</li><li>Type \" modprobe.blacklist=bochs_drm acpi=off\" at the end of the command line</li><li>Press enter</li><li>Once the installer starts, swith on eth0 and switch off eth1 in \"NETWORK &amp; HOST NAME\"</li><li>Follow the instruction to install.</li></ul><p>At the end of the installation, the guest is ready to be used</p><p><br/></p></ac:layout-cell></ac:layout-section></ac:layout>",
    "date": "2024-11-15",
    "disclaimer": "Users of this benchmark dataset are advised to check Atlassian’s official documentation for the most current information.",
    "space": "OD"
}